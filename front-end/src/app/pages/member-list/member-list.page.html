  <ion-header>
    <ion-item>
      <ion-select 
        aria-label="Gym"
        placeholder="Select Gym"
        interface="popover"
        (ionChange)="selecthandleChange($event)"
        [compareWith]="compareWith" value="{{MyDefaultGymValue}}"              
        slot="end">
        <!-- <ion-select-option *ngFor="let mt of MemberType" [value]="mt">{{ mt.name }}</ion-select-option> -->
          <ion-select-option *ngFor="let gym of gyms" value="{{gym._id}}"> {{gym.gym_name | uppercase}}</ion-select-option>
          
      </ion-select>
    </ion-item>
    <ion-searchbar         
        placeholder ='Search Member'
        [(ngModel)]="searchTerm"
        showCancelButton="focus"
        animated   
        >    
      </ion-searchbar>
      
     
  </ion-header>

<ion-content class="ion-padding">
        <!-- debounce="100"
        (ionChange)="handleChange($event)" -->

        <!-- to refresh page on pull down  -->
        <ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)">
          <ion-refresher-content></ion-refresher-content>
        </ion-refresher>

       <ion-list lines="none" *ngFor="let m of members | filter:searchTerm" lines="">
        <ion-div >
          <ion-grid>
            <ion-row>
              <ion-col size="10">              
                <ion-item>              
                  <ion-avatar slot="start">
                    <ion-img src="https://i.pravatar.cc/300?u=b"></ion-img> 
                    <ion-badge>{{m.memberType}}</ion-badge> 
                  </ion-avatar>
            
                <ion-row></ion-row>
                  <!-- <ion-badge>{{m.memberType}}</ion-badge>  -->
                <ion-list>
                  <ion-label>
                  <h3>{{m.m_name}}</h3>
                  <p (click)="CallTel(m.mobile)"><ion-icon name="call"></ion-icon>{{m.mobile}}</p>                  
                  <p><ion-icon name="calendar"></ion-icon> Last Date:{{m.m_enddate | date }}</p>
                </ion-label>
                </ion-list>                
              </ion-item>
            </ion-col>

            <ion-col debounceTime="700" (click)="presentModal(m._id)" size="1" [ngClass]="m.m_enddate < today_ ? 'div-vertical-red' : 'div-vertical-green'">
              <!-- <ion-div [ngClass]="m.m_enddate < today_ ? 'div-vertical-red' : 'div-vertical-green'">
              </ion-div> -->
            </ion-col>

            </ion-row>
            <ion-button class="button-round" *ngIf="m.isInviteAccepted === 'Yes'" [disabled]="isButtonSubmit" color="primary" shape="round" fill="outline" expand="block" (click)="updateMemberControl(m._id)"><ion-icon name="create"></ion-icon>Validity</ion-button>
            <ion-button *ngIf="m.isInviteAccepted === 'Not'" [disabled]="isButtonSubmit" color="primary" shape="round" fill="outline" expand="block" (click)="inviteMember(m._id)"><ion-icon name="create"></ion-icon>Invite</ion-button>
            <ion-button *ngIf="m.isInviteAccepted === 'Pending'" [disabled]="isButtonSubmit" color="success" shape="round" fill="outline" expand="block" (click)="inviteMember(m._id)"><ion-icon name="create"></ion-icon>Invited</ion-button>
  
          </ion-grid>
         
        
      </ion-div>
       </ion-list>

  
      <ion-card class="ion-margin"         
      *ngFor="let m of members | filter:searchTerm">
              <ion-card-header appSwipe
              (swipe)="onSwipe(m._id,$event)"
              SWIPE GESTURE>                          
                <ion-card-title>
                  <ion-item>
                    <ion-icon slot="start" name="chevron-forward-outline" (click)="inviteMember(m._id)"></ion-icon>
                    <ion-avatar slot="start">
                      <ion-img src="https://i.pravatar.cc/300?u=b"></ion-img>
                    </ion-avatar>


                    <ion-label>
                      <h2>{{m.m_name}}</h2>                      
                      <ion-badge>{{m.memberType}}</ion-badge>                       
                      <p (click)="CallTel(m.mobile)"><ion-icon name="call"></ion-icon>{{m.mobile}}</p>
                      <!-- presentModal -->
                      
                    </ion-label>
                    
                    <ion-icon slot="end"  name="chevron-back-outline" (click)="updateMember(m._id)"></ion-icon>
                  </ion-item>
                       
                </ion-card-title>
                <ion-card-subtitle>
                   <ion-grid>
                      <ion-row>
                        <!-- <ion-col>Balance :{{m.m_validdays}} Day(s)</ion-col> -->
                        <ion-col>End Date:{{m.m_enddate | date }}</ion-col>
                        <ion-col>Start Time:{{m.m_intime | date:'shortTime' }}</ion-col>
                        <ion-col>Finish Time:{{m.m_outtime | date:'shortTime' }}</ion-col>
                      </ion-row>
                    </ion-grid>                       
                </ion-card-subtitle>
              </ion-card-header>
            
              <!-- <ion-card-content>
                 <!-- <p>Balance Days {{m.m_validdays}} </p> --> 
                <!-- <div>     
                </div> -->
                
                 <!-- <p>unique ID {{m._id}} </p>  -->
                 <!-- <p>
                  <ion-button (click)="rangeValue(m.m_enddate,m.m_validdays)"> 
                    value
                  </ion-button>
                 </p> -->

                 <!-- <a [routerLink]="['/member/', m._id]">{{ m._id }}</a>
              </ion-card-content> 
              <!-- <ion-item>
                <ion-range aria-label="Custom range" [value]={rangeValue} [pin]="true"></ion-range>
              </ion-item>  -->

              <ion-grid>
                <ion-row>
                  <ion-col><ion-button [disabled]="isButtonSubmit" color="primary" shape="round" fill="outline" expand="block" (click)="updateMemberControl(m._id)"><ion-icon name="create"></ion-icon>Validity</ion-button>
                  </ion-col>
                  <!-- <ion-col><ion-button color="primary" expand="block" (click)="updateMember(m._id)"><ion-icon name="documents"></ion-icon>Detail</ion-button></ion-col> -->
                  <!-- <ion-col><ion-button color="primary" expand="block" (click)="inviteMember(m._id)"><ion-icon name="send"></ion-icon>Invite</ion-button></ion-col> -->
                </ion-row>
              </ion-grid>
              
                     
    </ion-card>
    

    <!-- <ion-button
    class="ion-margin" 
    expand="block"
    appGesture
    [gestureOpts]="[{name: 'tap'}]"
    (tap)="onTap($event)">
    TAP GESTURE
  </ion-button>

  <ion-button
    class="ion-margin" 
    expand="block"
    appGesture
    [gestureOpts]="[{name: 'doubleTap'}]"
    (doubleTap)="onDoubleTap($event)">
    DOUBLE TAP GESTURE
  </ion-button>

  <ion-button
    class="ion-margin" 
    expand="block"
    appGesture
    [gestureOpts]="[{name: 'press'}]"
    (press)="onPress($event)">
    LONG PRESS GESTURE
  </ion-button>

  <ion-button
    class="ion-margin" 
    expand="block"
    appGesture
    [gestureOpts]="[{name: 'swipe'}]"
    (swipe)="onSwipe($event)">
    SWIPE GESTURE
  </ion-button> -->

  <!-- <ion-button
    class="ion-margin" 
    expand="block"
    appTap
    (tap)="onTap($event)">
    TAP GESTURE
  </ion-button> -->

  <!-- <ion-button
    class="ion-margin" 
    expand="block"
    appTap
    (doubleTap)="onDoubleTap($event)">
    DOUBLE TAP GESTURE
  </ion-button> -->

  <!-- <ion-button
    class="ion-margin" 
    expand="block"
    appPress
    (press)="onPress($event)">
    LONG PRESS GESTURE
  </ion-button> -->

  <!-- <ion-button
    class="ion-margin" 
    expand="block"
    appSwipe
    (swipe)="onSwipe($event)">
    SWIPE GESTURE
  </ion-button> -->

    <ion-fab color="Secondary" vertical="bottom" horizontal="center" slot="fixed">
      <ion-fab-button (click)="addProduct()" >
        <ion-icon name="add"></ion-icon>
      </ion-fab-button>
    </ion-fab>  

    <!-- <ion-infinite-scroll (ionInfinite)="onIonInfinite($event)">
      <ion-infinite-scroll-content></ion-infinite-scroll-content>
    </ion-infinite-scroll> -->
<!-- <ion-button (click)="deletAllMembers()"> Delet All Members</ion-button> -->

  </ion-content>

 
 