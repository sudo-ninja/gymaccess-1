<ion-header class="ion-no-border">
  <ion-toolbar color="primary">
    <ion-title class="ion-text-center">
      Attendance
    </ion-title>
    
    <ion-buttons slot="start">
      <ion-button fill="clear" [routerLink]="['/gymtabs/infor']">
        <ion-icon slot="icon-only" name="home-outline"></ion-icon>
      </ion-button>
    </ion-buttons>

    <ion-buttons slot="end">
      <ion-button fill="clear"  [routerLink]="['/gymtabs/infor']">
        <ion-icon slot="icon-only" name="close-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" color="light">
  <form [formGroup]="memberForm">
    <div>
      <ion-list>
        <ion-item>
          <ion-label>
            <ion-input label="Attendance Shift Name" labelPlacement="floating" formControlName="shiftname" type="text"
              required>
            </ion-input>
          </ion-label>
        </ion-item>

        <ion-item *ngIf="!isToggled">
          <ion-grid>
            <ion-row>
              <ion-col size-md="6">
                <ion-label>
                  <h2>In Time</h2>
                  <ion-datetime-button datetime="Itime" formControlName="shift_start_time"
                    ngDefaultControl></ion-datetime-button>
                </ion-label>
              </ion-col>
              <ion-col size-md="6">
                <ion-label>
                  <h2>Out Time</h2>
                  <ion-datetime-button datetime="Otime" formControlName="shift_end_time"
                    ngDefaultControl></ion-datetime-button>
                </ion-label>
                <ion-text color="danger" *ngIf="memberForm.get('shift_end_time').hasError('endTimeInvalid')">
                  end Time must be after start Time.
                </ion-text>
              </ion-col>
            </ion-row>
          </ion-grid>

        </ion-item>

         
        <ion-modal [keepContentsMounted]="true">
          <ng-template>
            <ion-datetime 
            formControlName="shift_start_time" 
            [value]="intimeValue"
             [showDefaultButtons]="true"
              presentation="time" 
              hourCycle="h24" 
              id="Itime" 
              #Itime 
              (ionChange)="InTimeChange($event)"></ion-datetime>
          </ng-template>
        </ion-modal>
      </ion-list>
    </div>

    <!-- [min]="intimeValue" -->


    <ion-modal [keepContentsMounted]="true">
      <ng-template>
        <ion-datetime 
        formControlName="shift_end_time" 
        [min]="intimeValue" 
        [value]="outtimeValue"
          [showDefaultButtons]="true" 
          presentation="time" 
          hourCycle="h24" 
          id="Otime" 
          #Otime
          (ionChange)="OutTimeChange($event)"></ion-datetime>
      </ng-template>
    </ion-modal>


  </form>

  <ion-item>
    <ion-toggle
     mode="ios" 
     [enableOnOffLabels]="true" 
     justify="space-between" 
     color="danger" 
     [ngModel]="isToggled"
      (ngModelChange)="notifyAndUpdateIsToggled($event)"><strong>Custom Schedule</strong>
    </ion-toggle>
  </ion-item>



  <div *ngIf="isToggled" >
    <ion-grid>
      <ion-row>
        <ion-col *ngFor="let day of weekdays ">
          <ion-fab>
            <ion-fab-button [ngClass]="{'black-fab': day.isHoliday, 'blue-fab': !day.isHoliday}"
              (click)="customTiming(day)">
              <ion-label>{{day.name}}</ion-label>
            </ion-fab-button>
          </ion-fab>
        </ion-col>
      </ion-row>

      <ion-row class="col">
        <ion-col *ngFor="let day of weekdays ">
          <!-- <ion-label (click)="customTiming(day)" [ngClass]="{'holiday-text': day.isHoliday}">{{day.punchIn |
            date:'HH:MM'}}</ion-label> -->
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col *ngFor="let day of weekdays ">
          <!-- <ion-label (click)="customTiming(day)">{{day.punchOut | date:'HH:MM'}}</ion-label> -->
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>

  <ion-button type="submit" expand="block" shape="round" [disabled]="!memberForm.valid" (click)="onFormSubmit()"
    [strong]="true">Update</ion-button>


</ion-content>
